package me.gamrboy4life.paradox.extensions;

import java.io.File;
import java.io.FileWriter;
import java.io.PrintWriter;
import java.util.HashSet;

import com.google.common.collect.Sets;
import com.google.gson.JsonObject;

import de.Hero.clickgui.ClickGUI;
import me.gamrboy4life.paradox.Paradox;
import me.gamrboy4life.paradox.module.Module;
import me.gamrboy4life.paradox.utils.JsonUtils;

public class FileManager {
	public static File ROOT_DIR=new File("yuzuclient");
	public static File modules=new File(ROOT_DIR,"modules.json");
	
	public void init() {
		//Make Root Directory
		if(!ROOT_DIR.exists()) {ROOT_DIR.mkdirs();}
	
		//Handles Module
		if(!modules.exists())
			saveMods();
		else
			loadMods();

	}
	
	//保存したいハック
	public void saveMods() {
		try {
			JsonObject json=new JsonObject();
			for(Module mod:Paradox.instance.moduleManager.getModules()) {
				JsonObject jsonMod=new JsonObject();
				jsonMod.addProperty("enabled",mod.isToggled());
				json.add(mod.getName(), jsonMod);
			}
			PrintWriter save=new PrintWriter(new FileWriter(modules));
			save.println(JsonUtils.prettyGson.toJson(json));
			save.close();
		}catch(Exception e) {
			e.printStackTrace();
		}
		
	}
	
	//保存したくないハック
	private HashSet<String> modBlackList=Sets.newHashSet.ClickGui.class.getName());
	
	
	public void loadMods() {
		
		
	}
	

}
