package me.gamrboy4life.paradox.mods.impl;

import me.gamrboy4life.paradox.gui.hud.ScreenPosition;
import me.gamrboy4life.paradox.mods.ModDraggable;

public class ModHelloWorld extends ModDraggable {
    
    private boolean dragging;
    private int lastX, lastY;

    @Override
    public int getWidth() {
        return font.getStringWidth("Hello World (Dummy)");
    }

    @Override
    public int getHeight() {
        return font.FONT_HEIGHT;
    }

    @Override
    public void render(ScreenPosition pos) {
        font.drawString("Hello World", pos.getAbsoluteX() + 1, pos.getAbsoluteY() + 1, -1);
    }

    @Override
    public void renderDummy(ScreenPosition pos) {
        font.drawString("Hello World (Dummy)", pos.getAbsoluteX() + 1, pos.getAbsoluteY() + 1, 0xFF00FF00);
    }

    @Override
    public boolean isEnabled() {
        return true;
    }

    @Override
    public void save(ScreenPosition pos) {
        // Save the position if needed
    }

    @Override
    public ScreenPosition load() {
        // Load the position if needed
        return null;
    }
    
    @Override
    public void onMouseClicked(int mouseX, int mouseY, int mouseButton) {
        if (mouseButton == 0 && isOver(mouseX, mouseY)) {
            dragging = true;
            lastX = mouseX;
            lastY = mouseY;
        }
    }
    
    @Override
    public void onMouseReleased(int mouseX, int mouseY, int mouseButton) {
        if (mouseButton == 0) {
            dragging = false;
        }
    }
    
    @Override
    public void onMouseDragged(int mouseX, int mouseY, int deltaX, int deltaY, int mouseButton) {
        if (dragging) {
            ScreenPosition pos = getPosition();
            pos.setAbsolute(pos.getAbsoluteX() + deltaX, pos.getAbsoluteY() + deltaY);
        }
    }
    
    private boolean isOver(int mouseX, int mouseY) {
        ScreenPosition pos = getPosition();
        return mouseX >= pos.getAbsoluteX() && mouseX <= pos.getAbsoluteX() + getWidth() &&
               mouseY >= pos.getAbsoluteY() && mouseY <= pos.getAbsoluteY() + getHeight();
    }
}