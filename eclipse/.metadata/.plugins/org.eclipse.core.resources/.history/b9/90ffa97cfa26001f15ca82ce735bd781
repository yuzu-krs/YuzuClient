package me.gamrboy4life.paradox.module.combat;

import me.gamrboy4life.paradox.module.Category;
import me.gamrboy4life.paradox.module.Module;
import net.minecraft.client.entity.EntityPlayerSP;
import net.minecraft.entity.Entity;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.util.math.RayTraceResult;

public class Reach extends Module {

    public Reach() {
        super("Reach", 0, Category.COMBAT);
    }

    @Override
    public void onUpdate() {
        if (!this.isToggled())
            return;

        // プレイヤーの視線の方向を取得
        RayTraceResult rayTraceResult = mc.objectMouseOver;
        if (rayTraceResult == null || rayTraceResult.typeOfHit != RayTraceResult.Type.ENTITY)
            return;

        Entity targetEntity = rayTraceResult.entityHit;
        if (!(targetEntity instanceof EntityLivingBase) || targetEntity instanceof EntityPlayerSP)
            return;

        EntityLivingBase target = (EntityLivingBase) targetEntity;

        // プレイヤーとターゲットの距離が6.2173613F以内なら攻撃
        if (mc.thePlayer.getDistanceToEntity(target) <= 6.2173613F && target.isEntityAlive()) {
            mc.playerController.attackEntity(mc.thePlayer, target);
            mc.thePlayer.swingItem();
        }

        super.onUpdate();
    }
}